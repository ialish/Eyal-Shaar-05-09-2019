(window["webpackJsonpcity-weather"]=window["webpackJsonpcity-weather"]||[]).push([[0],{129:function(e,t,a){e.exports=a(312)},134:function(e,t,a){},139:function(e,t,a){},141:function(e,t,a){},27:function(e,t,a){e.exports=a.p+"static/media/HeartHollow.4ed65843.svg"},306:function(e,t,a){},307:function(e,t,a){},308:function(e,t,a){},309:function(e,t,a){},310:function(e,t,a){},311:function(e,t,a){},312:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),c=a.n(o),i=(a(134),a(9)),s=a(10),u=a(12),l=a(11),h=a(13),f=a(47),m=(a(139),a(316)),d=function(e){var t=e.onRouteChange,a=e.route;return r.a.createElement(m.a,{className:"justify-content-end nav-bar",defaultActiveKey:a},r.a.createElement(m.a.Item,null,r.a.createElement(m.a.Link,{eventKey:"home",onClick:function(){return t("home")}},"Home")),r.a.createElement(m.a.Item,null,r.a.createElement(m.a.Link,{eventKey:"favorites",onClick:function(){return t("favorites")}},"Favorites")))},p=(a(141),a(74)),v=a(128),y=a(317),E=function(e){var t=e.name,a=e.description,o=Object(n.useState)(!0),c=Object(v.a)(o,2),i=c[0],s=c[1];return r.a.createElement("div",null,r.a.createElement(y.a,{show:i,onClose:function(){return s(!i)}},r.a.createElement(y.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},t)),r.a.createElement(y.a.Body,null,a)))},g=Object(p.asyncContainer)(p.Typeahead),C="mfmyMacTCjNrpfZPyQnKj5GlII4HQR7K",b=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).onInputChange=function(e){a.setState({query:e})},a.onSearch=function(e){a.setState({isLoading:!0});var t="https://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=".concat(C,"&q=").concat(e);fetch(t).then(function(e){return e.json()}).then(function(e){return a.setState({isLoading:!1,options:e})}).catch(function(e){return a.setState({fetchError:e.message})})},a.onChange=function(e){a.props.onLocationChange({key:e[0].Key,city:e[0].LocalizedName}),a.clearRequest()},a.clearRequest=function(){setTimeout(function(){return a.refs.SubjectTypeahead.getInstance().clear()},0)},a.state={isLoading:!1,options:[],query:"",fetchError:""},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t;this.state.fetchError&&(e=r.a.createElement(E,{name:"Error: ".concat(this.state.fetchError,"!"),description:"Failed to fetch data from the server."}));return this.state.query.match(/^[0-9a-zA-Z]*$/)||(t=r.a.createElement(E,{name:"Error: Mistype!",description:"Only english letters are allowed."})),r.a.createElement("div",{className:"search-field"},r.a.createElement(g,{id:"AsyncTypeahead",ref:"SubjectTypeahead",placeholder:"Enter location",isLoading:this.state.isLoading,labelKey:"LocalizedName",onInputChange:this.onInputChange,onSearch:this.onSearch,options:this.state.options,onChange:this.onChange}),r.a.createElement("div",{className:"error-msg"},e,t))}}]),t}(r.a.Component),j=(a(306),a(315)),O=a(127),k=(a(307),a(27)),S=a.n(k),I=a(50),N=a.n(I),w=a(314),T=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).handleHeartImage=function(){e.state.favCities&&(e.state.favCities.find(function(t){return t.key===e.props.location.key})?e.state.heartImage===S.a&&e.setState({heartImage:N.a}):e.state.heartImage===N.a&&e.setState({heartImage:S.a}))},e.addRemoveCity=function(){var t;if(t=e.state.favCities?Object(O.a)(e.state.favCities):[],e.state.heartImage===S.a)t.push(e.props.location),e.setState({heartImage:N.a,favCities:t});else{var a=t.findIndex(function(t){return t.key===e.props.location.key});t.splice(a,1),e.setState({heartImage:S.a,favCities:t})}},e.state={favCities:[],heartImage:S.a},e}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({favCities:JSON.parse(localStorage.getItem("Favorite Cities"))}),this.handleHeartImage()}},{key:"componentDidUpdate",value:function(){this.handleHeartImage(),localStorage.setItem("Favorite Cities",JSON.stringify(this.state.favCities))}},{key:"render",value:function(){return r.a.createElement("div",{className:"favorites-button"},r.a.createElement("img",{src:this.state.heartImage,alt:"Heart",width:"35px"}),r.a.createElement(w.a,{variant:"outline-danger",size:"sm",onClick:this.addRemoveCity},"Add to Favorites"))}}]),t}(n.Component),D=(a(308),"mfmyMacTCjNrpfZPyQnKj5GlII4HQR7K"),F=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).fetchForecast=function(){var e="https://dataservice.accuweather.com/currentconditions/v1/".concat(a.props.location.key,"?apikey=").concat(D);fetch(e).then(function(e){return e.json()}).then(function(e){return a.setState({city:a.props.location.city,degreesC:e[0].Temperature.Metric.Value,weatherText:e[0].WeatherText})}).catch(function(e){return a.setState({fetchError:e.message})})},a.state={city:"",degreesC:null,weatherText:"",fetchError:""},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.fetchForecast()}},{key:"componentDidUpdate",value:function(e){(e.location||{}).key!==this.props.location.key&&this.fetchForecast()}},{key:"render",value:function(){var e;return this.state.fetchError&&(e=r.a.createElement(E,{name:"Error: ".concat(this.state.fetchError,"!"),description:"Failed to fetch data from the server."})),r.a.createElement("div",null,r.a.createElement("h5",{className:"city"},this.state.city),r.a.createElement("h6",null,Math.round(this.state.degreesC),"\xb0C"),r.a.createElement("h2",{className:"weather-text"},this.state.weatherText),r.a.createElement("div",{className:"error-msg"},e))}}]),t}(r.a.Component),L=(a(309),a(318)),P="mfmyMacTCjNrpfZPyQnKj5GlII4HQR7K",R=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).fetchForecast=function(){var e="https://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(a.props.location.key,"?apikey=").concat(P,"&metric=true");fetch(e).then(function(e){return e.json()}).then(function(e){return a.setState({DailyForecasts:e.DailyForecasts})}).catch(function(e){return a.setState({fetchError:e.message})})},a.state={DailyForecasts:[],fetchError:""},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.fetchForecast()}},{key:"componentDidUpdate",value:function(e){(e.location||{}).key!==this.props.location.key&&this.fetchForecast()}},{key:"render",value:function(){var e,t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return this.state.fetchError&&(e=r.a.createElement(E,{name:"Error: ".concat(this.state.fetchError,"!"),description:"Failed to fetch data from the server."})),r.a.createElement("div",{className:"five-day-cards"},this.state.DailyForecasts.map(function(e,a){return r.a.createElement(L.a,{className:"five-day-card",key:a},r.a.createElement(L.a.Body,null,r.a.createElement(L.a.Title,{className:"five-day-card-title"},t[new Date(1e3*e.EpochDate).getDay()]),r.a.createElement(L.a.Subtitle,{className:"mb-2 five-day-card-subtitle"},Math.round((e.Temperature.Minimum.Value+e.Temperature.Maximum.Value)/2),"\xb0C")))}),r.a.createElement("div",{className:"error-msg"},e))}}]),t}(r.a.Component),M=function(e){var t=e.location;return r.a.createElement("div",null,r.a.createElement(j.a,{className:"background-box",variant:"success"},r.a.createElement(T,{location:t}),r.a.createElement(F,{location:t}),r.a.createElement(R,{location:t})))},K=(a(310),"mfmyMacTCjNrpfZPyQnKj5GlII4HQR7K"),x=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).fetchData=function(e){var t=[];e.forEach(function(e){var n="https://dataservice.accuweather.com/currentconditions/v1/".concat(e.key,"?apikey=").concat(K);fetch(n).then(function(e){return e.json()}).then(function(n){var r=Math.round(n[0].Temperature.Metric.Value),o=n[0].WeatherText;t.push({location:e,degreesC:r,weatherText:o}),a.setState({favCitiesData:t})}).catch(function(e){return a.setState({fetchError:e.message})})})},a.handleOnClick=function(e){a.props.onLocationChange({key:e.location.key,city:e.location.city}),a.props.onRouteChange("home")},a.state={favCitiesData:[],fetchError:""},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("Favorite Cities"));e&&this.fetchData(e)}},{key:"render",value:function(){var e,t=this;if(this.state.fetchError)return e=r.a.createElement(E,{name:"Error: ".concat(this.state.fetchError,"!"),description:"Failed to fetch data from the server."}),r.a.createElement("div",{className:"error-msg"},e);if(!this.state.favCitiesData.length)return null;var a=this.state.favCitiesData.map(function(e){return r.a.createElement(L.a,{className:"favorites-card",key:e.location.key},r.a.createElement(L.a.Body,null,r.a.createElement(L.a.Title,{className:"favorites-card-title",onClick:function(){return t.handleOnClick(e)}},e.location.city),r.a.createElement(L.a.Subtitle,{className:"mb-2 favorites-card-subtitle"},r.a.createElement("h3",null,e.degreesC,"\xb0C"),r.a.createElement("h6",null,e.weatherText))))});return r.a.createElement("div",{className:"favorites-cards"},a)}}]),t}(n.Component),H={PENDING:"PENDING",SUCCESS:"SUCCESS",FAILED:"FAILED"},A=(a(311),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.onRequestCurrentPosition()}},{key:"render",value:function(){var e,t=this.props,a=t.route,n=t.onRouteChange,o=t.location,c=t.onLocationChange,i=t.error;return i?(e=r.a.createElement(E,{name:"Error: ".concat(i,"!"),description:"Failed to fetch data from the server."}),r.a.createElement("div",{className:"error-msg"},e)):r.a.createElement("div",null,r.a.createElement(d,{onRouteChange:n,route:a}),"home"===a?r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Weather Forecast"),r.a.createElement(b,{onLocationChange:c}),r.a.createElement(M,{location:o})):r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"My Favorites"),r.a.createElement(x,{onLocationChange:c,onRouteChange:n})))}}]),t}(n.Component)),Q=Object(f.b)(function(e){return{route:e.changeRoute.route,isPending:e.changeLocation.isPending,location:e.changeLocation.location,error:e.changeLocation.error}},function(e){return{onRouteChange:function(t){return e(function(e){return{type:"SET_ROUTE",payload:e}}(t))},onLocationChange:function(t){return e(function(e){return{type:"SET_LOCATION",payload:e}}(t))},onRequestCurrentPosition:function(){return e(function(e){e({type:H.PENDING}),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){var a=t.coords.latitude,n=t.coords.longitude,r="https://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=".concat("mfmyMacTCjNrpfZPyQnKj5GlII4HQR7K","&q=").concat(a,"%2C").concat(n);return fetch(r).then(function(e){return e.json()},function(t){return e({type:H.FAILED,payload:t.message})}).then(function(t){return e({type:H.SUCCESS,payload:{key:t.Key,city:t.LocalizedName}})})})})}}})(A);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=a(26),G=a(124),U=a(125),W=a(126);function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(a,!0).forEach(function(t){Object(W.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var B={route:"home"},J={isPending:!1,location:{key:"215854",city:"Tel Aviv"},error:""},V=Object(q.c)({changeRoute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROUTE":return z({},e,{},{route:t.payload});default:return e}},changeLocation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOCATION":return z({},e,{},{location:t.payload});case H.PENDING:return z({},e,{},{isPending:!0});case H.SUCCESS:return z({},e,{},{location:t.payload,isPending:!1});case H.FAILED:return z({},e,{},{error:t.payload,isPending:!1});default:return e}}}),_=Object(U.createLogger)(),$=Object(q.d)(V,Object(q.a)(G.a,_));c.a.render(r.a.createElement(f.a,{store:$},r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},50:function(e,t,a){e.exports=a.p+"static/media/HeartFull.efb08012.svg"}},[[129,1,2]]]);
//# sourceMappingURL=main.a3f7b3e2.chunk.js.map