(window["webpackJsonpcity-weather"]=window["webpackJsonpcity-weather"]||[]).push([[0],{129:function(e,t,n){e.exports=n(312)},134:function(e,t,n){},139:function(e,t,n){},28:function(e,t,n){e.exports=n.p+"static/media/HeartHollow.4ed65843.svg"},305:function(e,t,n){},306:function(e,t,n){},307:function(e,t,n){},308:function(e,t,n){},309:function(e,t,n){},310:function(e,t,n){},311:function(e,t,n){},312:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),c=n.n(o),i=(n(134),n(9)),s=n(10),u=n(13),l=n(11),E=n(14),d=n(12),h=(n(139),n(316)),p=function(e){var t=e.onRouteChange,n=e.route;return r.a.createElement(h.a,{className:"justify-content-end nav-bar",defaultActiveKey:n},r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Link,{eventKey:"home",onClick:function(){return t("home")}},"Home")),r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Link,{eventKey:"favorites",onClick:function(){return t("favorites")}},"Favorites")))},f=n(75),m=n(128),y=n(317),v=function(e){var t=e.name,n=e.description,o=Object(a.useState)(!0),c=Object(m.a)(o,2),i=c[0],s=c[1];return r.a.createElement("div",null,r.a.createElement(y.a,{show:i,onClose:function(){return s(!i)}},r.a.createElement(y.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},t)),r.a.createElement(y.a.Body,null,n)))},g="4ORxsH7xa2EUVAiVdvAQ12BUyelXgrF2",C=(n(305),Object(f.asyncContainer)(f.Typeahead)),S=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e){n.props.onLocationChange({key:e[0].Key,city:e[0].LocalizedName}),n.clearRequest()},n.clearRequest=function(){setTimeout(function(){return n.refs.SubjectTypeahead.getInstance().clear()},0)},n}return Object(E.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t,n=this.props,a=n.query,o=n.onInputChange,c=n.onSearch,i=n.isLoading,s=n.options,u=n.error;u&&(e=r.a.createElement(v,{name:"Error: ".concat(u,"!"),description:"Failed to fetch data from the server."}));return a.match(/^[0-9a-zA-Z]*$/)||(t=r.a.createElement(v,{name:"Error: Mistype!",description:"Only english letters are allowed."})),r.a.createElement("div",{className:"search-field"},r.a.createElement(C,{id:"AsyncTypeahead",ref:"SubjectTypeahead",placeholder:"Enter location",isLoading:i,labelKey:"LocalizedName",onInputChange:o,onSearch:c,options:s,onChange:this.onChange}),r.a.createElement("div",{className:"error-msg"},e,t))}}]),t}(r.a.Component),O=Object(d.b)(function(e){return{query:e.changeInput.query,isLoading:e.changeInput.isLoading,options:e.changeInput.options,error:e.changeInput.error}},function(e){return{onInputChange:function(t){return e(function(e){return{type:"UPDATE_INPUT;",payload:e}}(t))},onSearch:function(t){return e(function(e){return function(t){t({type:"REQUEST_SEARCH_OPTIONS_PENDING"});var n="https://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=".concat(g,"&q=").concat(e);return fetch(n).then(function(e){return e.json()},function(e){return t({type:"REQUEST_SEARCH_OPTIONS_FAILED",payload:e.message})}).then(function(e){return t({type:"REQUEST_SEARCH_OPTIONS_SUCCESS",payload:e})})}}(t))}}})(S),T=(n(306),n(315)),R=n(49),_=(n(307),n(28)),I=n.n(_),N=n(51),b=n.n(N),D=n(314),F=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).handleHeartImage=function(){e.state.favCities&&(e.state.favCities.find(function(t){return t.key===e.props.location.key})?e.state.heartImage===I.a&&e.setState({heartImage:b.a}):e.state.heartImage===b.a&&e.setState({heartImage:I.a}))},e.addRemoveCity=function(){var t;if(t=e.state.favCities?Object(R.a)(e.state.favCities):[],e.state.heartImage===I.a)t.push(e.props.location),e.setState({heartImage:b.a,favCities:t});else{var n=t.findIndex(function(t){return t.key===e.props.location.key});t.splice(n,1),e.setState({heartImage:I.a,favCities:t})}},e.state={favCities:[],heartImage:I.a},e}return Object(E.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({favCities:JSON.parse(localStorage.getItem("Favorite Cities"))}),this.handleHeartImage()}},{key:"componentDidUpdate",value:function(){this.handleHeartImage(),localStorage.setItem("Favorite Cities",JSON.stringify(this.state.favCities))}},{key:"render",value:function(){return r.a.createElement("div",{className:"favorites-button"},r.a.createElement("img",{src:this.state.heartImage,alt:"Heart",width:"35px"}),r.a.createElement(D.a,{variant:"outline-danger",size:"sm",onClick:this.addRemoveCity},"Add to Favorites"))}}]),t}(a.Component),U=(n(308),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.onRequestCurrentWeather()}},{key:"componentDidUpdate",value:function(e){(e.location||{}).key!==this.props.location.key&&this.props.onRequestCurrentWeather()}},{key:"render",value:function(){var e,t=this.props,n=t.currentWeatherData,a=t.error;return a&&(e=r.a.createElement(v,{name:"Error: ".concat(a,"!"),description:"Failed to fetch data from the server."})),r.a.createElement("div",null,r.a.createElement("h5",{className:"city"},n.city),r.a.createElement("h6",null,Math.round(n.degreesC),"\xb0C"),r.a.createElement("h2",{className:"weather-text"},n.weatherText),r.a.createElement("div",{className:"error-msg"},e))}}]),t}(r.a.Component)),j=Object(d.b)(function(e){return{isPending:e.changeCurrentWeather.isPending,currentWeatherData:e.changeCurrentWeather.currentWeatherData,error:e.changeCurrentWeather.error}},function(e,t){return{onRequestCurrentWeather:function(){return e((n=t.location,function(e){e({type:"REQUEST_CURRENT_WEATHER_PENDING"});var t="https://dataservice.accuweather.com/currentconditions/v1/".concat(n.key,"?apikey=").concat(g);return fetch(t).then(function(e){return e.json()},function(t){return e({type:"REQUEST_CURRENT_WEATHER_FAILED",payload:t.message})}).then(function(t){return e({type:"REQUEST_CURRENT_WEATHER_SUCCESS",payload:{city:n.city,degreesC:t[0].Temperature.Metric.Value,weatherText:t[0].WeatherText}})})}));var n}}})(U),P=n(318),A=(n(309),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.onRequestFiveDayForecast()}},{key:"componentDidUpdate",value:function(e){(e.location||{}).key!==this.props.location.key&&this.props.onRequestFiveDayForecast()}},{key:"render",value:function(){var e,t=this.props,n=t.DailyForecasts,a=t.error,o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return a&&(e=r.a.createElement(v,{name:"Error: ".concat(a,"!"),description:"Failed to fetch data from the server."})),r.a.createElement("div",{className:"five-day-cards"},n.map(function(e,t){return r.a.createElement(P.a,{className:"five-day-card",key:t},r.a.createElement(P.a.Body,null,r.a.createElement(P.a.Title,{className:"five-day-card-title"},o[new Date(1e3*e.EpochDate).getDay()]),r.a.createElement(P.a.Subtitle,{className:"mb-2 five-day-card-subtitle"},Math.round((e.Temperature.Minimum.Value+e.Temperature.Maximum.Value)/2),"\xb0C")))}),r.a.createElement("div",{className:"error-msg"},e))}}]),t}(r.a.Component)),k=Object(d.b)(function(e){return{isPending:e.changeFiveDayForecast.isPending,DailyForecasts:e.changeFiveDayForecast.DailyForecasts,error:e.changeFiveDayForecast.error}},function(e,t){return{onRequestFiveDayForecast:function(){return e((n=t.location,function(e){e({type:"REQUEST_FIVE_DAY_FORECAST_PENDING"});var t="https://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(n.key,"?apikey=").concat(g,"&metric=true");return fetch(t).then(function(e){return e.json()},function(t){return e({type:"REQUEST_FIVE_DAY_FORECAST_FAILED",payload:t.message})}).then(function(t){return e({type:"REQUEST_FIVE_DAY_FORECAST_SUCCESS",payload:t.DailyForecasts})})}));var n}}})(A),w=function(e){var t=e.location;return r.a.createElement("div",null,r.a.createElement(T.a,{className:"background-box",variant:"success"},r.a.createElement(F,{location:t}),r.a.createElement(j,{location:t}),r.a.createElement(k,{location:t})))},L=(n(310),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleOnClick=function(e){n.props.onLocationChange({key:e.location.key,city:e.location.city}),n.props.onRouteChange("home")},n}return Object(E.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("Favorite Cities"));e&&this.props.onRequestFavoritesCurrentConditions(e)}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.favCitiesData,o=n.error;if(o)return e=r.a.createElement(v,{name:"Error: ".concat(o,"!"),description:"Failed to fetch data from the server."}),r.a.createElement("div",{className:"error-msg"},e);if(!a.length)return null;var c=a.map(function(e){return r.a.createElement(P.a,{className:"favorites-card",key:e.location.key},r.a.createElement(P.a.Body,null,r.a.createElement(P.a.Title,{className:"favorites-card-title",onClick:function(){return t.handleOnClick(e)}},e.location.city),r.a.createElement(P.a.Subtitle,{className:"mb-2 favorites-card-subtitle"},r.a.createElement("h3",null,e.degreesC,"\xb0C"),r.a.createElement("h6",null,e.weatherText))))});return r.a.createElement("div",{className:"favorites-cards"},c)}}]),t}(a.Component)),Q=Object(d.b)(function(e){return{isPending:e.updateFavorites.isPending,favCitiesData:e.updateFavorites.favCitiesData,error:e.updateFavorites.error}},function(e){return{onRequestFavoritesCurrentConditions:function(t){return e(function(e){return function(t){e.forEach(function(e){t({type:"REQUEST_FAVORITES_CURRENT_CONDITIONS_PENDING"});var n="https://dataservice.accuweather.com/currentconditions/v1/".concat(e.key,"?apikey=").concat(g);return fetch(n).then(function(e){return e.json()},function(e){return t({type:"REQUEST_FAVORITES_CURRENT_CONDITIONS_FAILED",payload:e.message})}).then(function(n){t({type:"REQUEST_FAVORITES_CURRENT_CONDITIONS_SUCCESS",payload:{location:e,degreesC:Math.round(n[0].Temperature.Metric.Value),weatherText:n[0].WeatherText}})})})}}(t))}}})(L),W=(n(311),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.onRequestCurrentPosition()}},{key:"render",value:function(){var e,t=this.props,n=t.route,a=t.onRouteChange,o=t.location,c=t.onLocationChange,i=t.error;return i?(e=r.a.createElement(v,{name:"Error: ".concat(i,"!"),description:"Failed to fetch data from the server."}),r.a.createElement("div",{className:"error-msg"},e)):r.a.createElement("div",null,r.a.createElement(p,{onRouteChange:a,route:n}),"home"===n?r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Weather Forecast"),r.a.createElement(O,{onLocationChange:c}),r.a.createElement(w,{location:o})):r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"My Favorites"),r.a.createElement(Q,{onLocationChange:c,onRouteChange:a})))}}]),t}(a.Component)),H=Object(d.b)(function(e){return{route:e.changeRoute.route,isPending:e.changeLocation.isPending,location:e.changeLocation.location,error:e.changeLocation.error}},function(e){return{onRouteChange:function(t){return e(function(e){return{type:"SET_ROUTE",payload:e}}(t))},onLocationChange:function(t){return e(function(e){return{type:"SET_LOCATION",payload:e}}(t))},onRequestCurrentPosition:function(){return e(function(e){e({type:"REQUEST_CURRENT_POSITION_PENDING"}),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){var n=t.coords.latitude,a=t.coords.longitude,r="https://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=".concat(g,"&q=").concat(n,"%2C").concat(a);return fetch(r).then(function(e){return e.json()},function(t){return e({type:"REQUEST_CURRENT_POSITION_FAILED",payload:t.message})}).then(function(t){return e({type:"REQUEST_CURRENT_POSITION_SUCCESS",payload:{key:t.Key,city:t.LocalizedName}})})})})}}})(W);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=n(27),V=n(125),x=n(126),M=n(127);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach(function(t){Object(M.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var K={route:"home"},Y={isPending:!1,location:{key:"215854",city:"Tel Aviv"},error:""},z={query:"",isLoading:!1,options:[],error:""},J={isPending:!1,currentWeatherData:{city:"",degreesC:null,weatherText:""},error:""},$={isPending:!1,DailyForecasts:[],error:""},X={isPending:!1,favCitiesData:[],error:""},Z=Object(x.createLogger)(),ee=Object(q.c)({changeRoute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROUTE":return B({},e,{},{route:t.payload});default:return e}},changeLocation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOCATION":return B({},e,{},{location:t.payload});case"REQUEST_CURRENT_POSITION_PENDING":return B({},e,{},{isPending:!0});case"REQUEST_CURRENT_POSITION_SUCCESS":return B({},e,{},{location:t.payload,isPending:!1});case"REQUEST_CURRENT_POSITION_FAILED":return B({},e,{},{error:t.payload,isPending:!1});default:return e}},changeInput:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_INPUT;":return B({},e,{},{query:t.payload});case"REQUEST_SEARCH_OPTIONS_PENDING":return B({},e,{},{isLoading:!0});case"REQUEST_SEARCH_OPTIONS_SUCCESS":return B({},e,{},{options:t.payload,isLoading:!1});case"REQUEST_SEARCH_OPTIONS_FAILED":return B({},e,{},{error:t.payload,isLoading:!1});default:return e}},changeCurrentWeather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_CURRENT_WEATHER_PENDING":return B({},e,{},{isPending:!0});case"REQUEST_CURRENT_WEATHER_SUCCESS":return B({},e,{},{currentWeatherData:t.payload,isPending:!1});case"REQUEST_CURRENT_WEATHER_FAILED":return B({},e,{},{error:t.payload,isPending:!1});default:return e}},changeFiveDayForecast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_FIVE_DAY_FORECAST_PENDING":return B({},e,{},{isPending:!0});case"REQUEST_FIVE_DAY_FORECAST_SUCCESS":return B({},e,{},{DailyForecasts:t.payload,isPending:!1});case"REQUEST_FIVE_DAY_FORECAST_FAILED":return B({},e,{},{error:t.payload,isPending:!1});default:return e}},updateFavorites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_FAVORITES_CURRENT_CONDITIONS_PENDING":return B({},e,{},{isPending:!0});case"REQUEST_FAVORITES_CURRENT_CONDITIONS_SUCCESS":return B({},e,{favCitiesData:[].concat(Object(R.a)(e.favCitiesData),[B({},t.payload)]),isPending:!1});case"REQUEST_FAVORITES_CURRENT_CONDITIONS_FAILED":return B({},e,{},{error:t.payload,isPending:!1});default:return e}}}),te=Object(q.d)(ee,Object(q.a)(V.a,Z));c.a.render(r.a.createElement(d.a,{store:te},r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},51:function(e,t,n){e.exports=n.p+"static/media/HeartFull.efb08012.svg"}},[[129,1,2]]]);
//# sourceMappingURL=main.f40dc13a.chunk.js.map